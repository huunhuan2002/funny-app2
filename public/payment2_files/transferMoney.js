TransferMoney=function(n){function l(){DoRequest({method:"GET",url:"/api/GetPartnerList",onload:function(t){var o=JSON.parse(t.responseText),u='<optgroup style="color: #3b8263" label="'+__LocalizedStrings.mainWallet+'">',f='<optgroup style="color: #3b8263" label="'+__LocalizedStrings.sportnav+'">',e='<optgroup style="color: #3b8263" label="'+__LocalizedStrings.casinonav+'">',s='<optgroup style="color: #3b8263" label="'+__LocalizedStrings.lotterynav+'">';o&&o.Data&&(n.each(o.Data,function(n,t){var r="",i=0;t.Code==="main"&&(t.DisplayedName=__LocalizedStrings.mainWallet,i=0);t.Code==="agilebet"&&(t.DisplayedName=__LocalizedStrings.sportbookWallet,i=1);t.Code==="betradar"&&(t.DisplayedName=__LocalizedStrings.virtualSportWallet,i=1);t.Code==="boping"&&(t.DisplayedName=__LocalizedStrings.sportXWallet,i=1);t.Code==="btisports"&&(t.DisplayedName=__LocalizedStrings.sport365Wallet,i=1);t.Code==="tfgaming"&&(t.DisplayedName=__LocalizedStrings.esportsWallet,i=1);t.Code==="agiledeal"&&(t.DisplayedName=__LocalizedStrings.aceWallet,i=2);t.Code==="sagaming"&&(t.DisplayedName=__LocalizedStrings.kingWallet,i=2);t.Code==="asiagaming"&&(t.DisplayedName=__LocalizedStrings.queenWallet,i=2);t.Code==="allbet"&&(t.DisplayedName=__LocalizedStrings.jackWallet,i=2);(t.Code==="gdgaming"||t.Code==="weworld")&&(t.DisplayedName=__LocalizedStrings.tenWallet,i=2);(t.Code==="agileslot"||t.Code==="genesis")&&(t.DisplayedName=__LocalizedStrings.koiWallet,i=2);t.Code==="agilenbg"&&(t.DisplayedName=__LocalizedStrings.keno_ilottoWallet,i=3);t.Code==="pgsoft"&&(t.DisplayedName=__LocalizedStrings.pgslotsWallet,i=2);t.Code==="simpleplay"&&(t.DisplayedName=__LocalizedStrings.simpleplayWallet,i=2);t.Code==="cpwlotto"&&(t.DisplayedName=__LocalizedStrings.sicbolotteryWallet,i=3);t.Code==="evolution"&&(t.DisplayedName=__LocalizedStrings.eightWallet,i=2);t.Code==="sabacv"&&(t.DisplayedName=__LocalizedStrings.sport247Wallet,i=1);t.Code==="digitain"&&(t.DisplayedName=__LocalizedStrings.sport3Wallet,i=1);t.Code==="viacasino"&&(t.DisplayedName=__LocalizedStrings.nineWallet,i=2);r+='<option value="'+t.Code+'">'+t.DisplayedName+"<\/option>";switch(i){case 0:u+=r;break;case 1:f+=r;break;case 2:e+=r;break;case 3:s+=r}}),u+="<\/optgroup>",f+="<\/optgroup>",e+="<\/optgroup>",s+="<\/optgroup>",i.append(u),i.append(f),i.append(e),r.append(u),r.append(f),r.append(e))}})}function a(i){i.preventDefault();var r=n(this);return spinner(r,!0),f.val().trim()!==""?DoRequest({method:"POST",url:"/api/Promotion/CheckBonus",body:t.serialize(),onload:function(n){var i=JSON.parse(n.responseText);if(i&&i.Data)Modal.light.on({url:"AddBonusConfirm?bonusCode="+f.val().trim(),classModal:"download-content",clear:1,buttons:[{label:"ok",action:function(){Modal.light.off();h(r)}},{label:"cancel",action:function(){Modal.light.off();spinner(r,!1)}}],callback:function(){}});else i.ErrorState&&(getMessage({data:i.ErrorState.ErrorCode,type:ModalType.Danger}),spinner(r,!1)),t.trigger("reset")}}):h(r),!1}function h(i){var r=validate(t,s),u;r?(spinner(i,!1),showErrors(t,r||{})):(u=t.serialize(),DoRequest({method:"POST",url:"/api/TransferMoney",body:u,onload:function(r){f.val("");var u=JSON.parse(r.responseText);spinner(i,!1);u&&u.Data?getMessage({data:u.ResourceKey},function(){n("#walletRefresh").click();n("#cpTranferCustomModal .close").click()}):u.ErrorState&&getMessage({data:u.ErrorState.ErrorCode,type:ModalType.Danger});t.trigger("reset")}}))}function v(t,i,r){for(var c=n.data(t[0],"options"),l=[],v=r?r:t.val(),o='<optgroup label="'+__LocalizedStrings.mainWallet+'">',s='<optgroup label="'+__LocalizedStrings.sportnav+'">',h='<optgroup label="'+__LocalizedStrings.casinonav+'">',a='<optgroup label="'+__LocalizedStrings.lotterynav+'">',u,f,e=0;e<c.length;e++)if(u=c[e],u[1].toLowerCase()!==i){f="";f=v==u[1]?'<option value="'+u[1]+'" selected>'+u[0]+"<\/option>":'<option value="'+u[1]+'">'+u[0]+"<\/option>";switch(u[1]){case"main":o+=f;break;case"agilebet":case"boping":case"betradar":case"btisports":case"tfgaming":case"sabacv":case"digitain":s+=f;break;case"agiledeal":case"sagaming":case"asiagaming":case"allbet":case"gdgaming":case"agileslot":case"pgsoft":case"simpleplay":case"evolution":case"genesis":case"weworld":case"viacasino":h+=f;break;case"agilenbg":case"cpwlotto":a+=f}}return o+="<\/optgroup>",s+="<\/optgroup>",h+="<\/optgroup>",a+="<\/optgroup>",l.push(o+s+h),l.join()}function c(t){var i=n.data(t[0],"options");i==null&&(i=[],t.find("option").each(function(){i.push([n(this).html(),n(this).val()])}));n.data(t[0],"options",i)}function e(n,t){c(n);c(t);t.html(v(t,n.val().toLowerCase()))}function y(){i=n("#TransferFrom");r=n("#TransferTo");o=n("#btnTransferMoney");t=n("form#transferMoney");u=n("#appyBonus");f=n("#BonusCode");DoValidate(t,s);l();i.on("change",function(){var t=n(this),i=r;t.val().toLowerCase()=="main"?u.show():(f.val(""),u.hide());userAgent.isMobile()&&e(t,i)});r.on("change",function(){var r=n(this),t=i;t.val().toLowerCase()=="main"?u.show():(u.hide(),f.val(""));userAgent.isMobile()&&e(r,t)});n(".ensure").on("click",function(){var n=i,t=r;n.val().toLowerCase()=="main"?u.show():(f.val(""),u.hide());e(n,t)});o.on("click",a)}var i,r,o,u,f,t,s={TransferFrom:{presence:!0},TransferTo:{presence:!0},TransferAmount:{presence:!0}};n(y)}(jQuery)